!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.Cinematic=e()}(this,function(){function t(t){return"N/A"!=t}function e(t,e){var n;return function(){var i=this,o=arguments,s=function(){n=null,t.apply(i,o)};clearTimeout(n),n=setTimeout(s,e)}}function n(t){return""===t.val()}function i(){p=new u("loading...","bottom")}function o(){p=new u("No network connection","top")}function s(t,e,n){n.text("Loading..."),e.text("Loading..."),t.text("Loading...")}function r(){function t(){c.query(u.val(),c.searchType,!0)}function i(){var t=$(this).text().toLowerCase();c.searchType=t,s()}function o(t){"Enter"==t.key&&(n(u)||s())}var s,r=$(".search-btn"),u=$(".search-input"),p=$("sidebar .menu > ul > li"),l=$(document);s=e(t,500),c.query(a.initial_title_search,c.searchType,a.initial_reset),r.click(s),p.click(i),l.keypress(o)}var a={initial_title_search:"batman",initial_reset:!0},u=function(t,e,n){this.message=t,this.position=e,this.timing=n||!1,this.parent=$(".content"),this._setup()};u.prototype._setup=function(){var t=this;this.render(),this.popup(),this.timing&&setTimeout(function(){t.miss()},this.timing)},u.prototype.render=function(){var t="top"==this.position?"top: 18px;":"bottom: 0.3%;";this.me=$("<div class='message' style='"+t+"'><p>"+this.message+"</p></div>"),this.parent.append(this.me)},u.prototype.popup=function(){this.me.animate({opacity:1},200)},u.prototype.miss=function(){var t=this;this.me.animate({opacity:0},600,function(){t.me.remove()})};var c=function(){};c.extend=function(t,e,n){var n=n||!1;this[t]=n?e:e.call()},c.extend("version",function(){return"0.0.1-alp"}),c.extend("lastPage",function(){return 1}),c.extend("debug",function(){return{extend:c.extend}}),c.extend("lastTitleSearch",function(){return 1}),c.extend("lastResults",function(){return""}),c.extend("searchType",function(){return"movie"});var p;return c.extend("query",function(t,e,n){var n=n||!1;n?(c.lastPage=1,c.clearResults(),c.newRequest(t,e),c.newRequest(t,e)):c.newRequest(t,e)},!0),c.extend("newRequest",function(t,e){var n=setTimeout(i,1e3),s="http://www.omdbapi.com/?s="+t+"&page="+c.lastPage++ +"&type="+e;$.ajax({url:s,success:function(e){clearTimeout(n),"True"==e.Response?(c.lastResults=e,c.lastTitleSearch=t,c.appendResults()):new u("No results for search","top"),p&&p.miss()},error:function(t){0==t.readyState&&o()}})},!0),c.extend("getContents",function(t){var e,n="http://www.omdbapi.com/?i="+t+"&plot=full&r=json",i=$("sidebar .title"),o=$("sidebar .year"),r=$("sidebar .plot");e=setTimeout(function(){s(i,o,r)},500),$.ajax({url:n,success:function(t){clearTimeout(e),i.text(t.Title),o.text(t.Year),r.text(t.Plot)}})},!0),c.extend("update",function(){c.query(c.lastTitleSearch,c.searchType)},!0),c.debug.extend("newRequest",function(t){const e="../test/assets/movie.fixture.json";$.ajax({url:e,success:t})},!0),c.extend("clearResults",function(){var t=$(".content");t.empty()},!0),c.extend("addEvent",function(t){t.click(function(){c.getContents($(this)[0].imdbID)})},!0),c.extend("appendTo",function(e,n){var i,o,s,r,a="";for(i in e)e[i].hasOwnProperty("Poster")&&(s=e[i].Poster,r=e[i].imdbID,t(s)||(s="img/postererr.svg",a="background-position: center;"),o=$('<div class="movie" style="background-image: url('+s+");"+a+'"</div>'),o[0].imdbID=r,n.append(o),o.fadeIn(600),c.addEvent(o))},!0),c.extend("appendResults",function(){var t=c.lastResults.Search,e=$(".content");c.appendTo(t,e)},!0),c.extend("_onScroll",function(){var t=$(window),e=$(document),n=t.scrollTop(),i=t.height(),o=e.height();n+i>=o&&c.update()},!0),$(document).ready(r),$(document).scroll(c._onScroll),c});